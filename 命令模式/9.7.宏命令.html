<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html>

<script>
    var closeDoorCommand = {
      execute: function() {
        console.log('关门');
      },
      undo: function() {
        console.log('开门');
      }
    };

    var openPcCommand = {
      execute: function() {
        console.log('开电脑');
      },
      undo: function() {
        console.log('关电脑');
      }
    };

    var openQQComand = {
      execute: function() {
        console.log('登录 QQ');
      },
      undo: function() {
        console.log('退出 QQ');
      }
    };

    var MacroCommand = function() {
      return {
        commandsList: [],
        add: function(command) {
          this.commandsList.push(command);
        },
        execute: function() {
          for (var i = 0, command; command = this.commandsList[i++];) {
            command.execute();
          }
        },
        undo: function() {
          for (var i = this.commandsList.length - 1, command; command = this.commandsList[i--];) {
            command.undo();
          }
        }
      }
    };

    var macroCommand = MacroCommand();
    macroCommand.add(closeDoorCommand);
    macroCommand.add(openPcCommand);
    macroCommand.add(openQQComand);

    macroCommand.execute();
    macroCommand.undo();
</script>
